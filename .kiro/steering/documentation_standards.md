---
inclusion: always
---

# 文档编写标准和检查清单

## 语言要求

### 📋 文档语言规范
- **所有文档必须使用中文**：包括 README、技术文档、注释、规范等
- **代码注释使用中文**：函数说明、算法解释、重要注释都用中文
- **变量和函数名保持英文**：遵循编程惯例，但注释用中文解释
- **技术术语处理**：首次出现时提供中英文对照，如"PQ（感知量化器）"

### 🎯 适用范围
- 所有 `.md` 文档文件
- 代码中的注释和文档字符串
- 规范文档和设计文档
- 用户面向的说明文档

## 核心原则

### 1. 预防常见误解
每个技术概念都要回答：
- **这是什么？** (定义)
- **这不是什么？** (澄清误解)
- **为什么需要它？** (动机)
- **谁会用到它？** (适用人群)
- **具体怎么用？** (示例)

### 2. 分层解释策略
```
第1层：一句话概括 (给急躁的人)
第2层：核心概念解释 (给理解的人)  
第3层：详细技术细节 (给实现的人)
第4层：常见误解澄清 (给困惑的人)
```

## 文档检查清单

### ✅ 概念澄清检查
- [ ] 明确说明"这是什么"
- [ ] 明确说明"这不是什么"
- [ ] 解释为什么需要这个东西
- [ ] 说明适用和不适用的场景
- [ ] 提供具体使用示例

### ✅ 技术标准vs艺术自由检查
当涉及"标准"概念时：
- [ ] 区分技术标准和创作标准
- [ ] 解释标准的适用范围
- [ ] 说明不限制创作自由的部分
- [ ] 用类比帮助理解

### ✅ 跨平台一致性检查
当涉及算法实现时：
- [ ] 说明为什么需要跨平台一致
- [ ] 列出具体的平台/版本
- [ ] 解释验证方法
- [ ] 提供对比示例

### ✅ 数据文件用途检查
当介绍数据文件时：
- [ ] 说明文件的具体用途
- [ ] 解释适用的算法/场景
- [ ] 提供使用代码示例
- [ ] 说明不适用的情况

## 常见误解模式

### 模式1：技术标准被误解为创作限制
**症状**：用户认为技术规范限制了创作自由
**解决**：
- 明确区分技术层面和艺术层面
- 用类比解释（如钢琴调音vs音乐创作）
- 强调创作参数的可调性

### 模式2：特定算法数据被误解为通用标准
**症状**：用户认为某个算法的参考数据适用于所有算法
**解决**：
- 在标题中明确算法名称
- 说明适用范围和限制
- 列出不适用的情况

### 模式3：实现细节被误解为使用方法
**症状**：用户混淆开发者文档和用户文档
**解决**：
- 明确标注目标读者
- 分离实现文档和使用文档
- 提供不同层次的入口

## 文档模板

### README主文档模板
```markdown
# 项目名称

一句话描述项目是什么

## 🎯 项目目标
**不是**：[常见误解]
**而是**：[实际目标]

## 🚀 快速开始
[最简单的使用方法]

## 📖 详细文档
[链接到具体文档]

## 🤝 适用场景
### ✅ 适合你，如果：
### ❌ 不适合你，如果：

## 常见误解澄清
### ❌ 误解：
**✅ 实际**：
```

### 技术文档模板
```markdown
# 技术组件名称

## 这是什么
[一句话定义]

## 这不是什么  
[澄清常见误解]

## 为什么需要它
[解决的问题]

## 谁会用到
- 开发者场景1
- 开发者场景2

## 怎么使用
```code example```

## 不适用的情况
[明确说明限制]
```

## 代码注释标准

### 函数注释模板（中文）
```cpp
/**
 * @brief PQ EOTF 函数 - 将 PQ 编码值转换为线性光
 * 
 * 根据 SMPTE ST 2084 标准实现感知量化器的电光转换函数。
 * 详细说明：
 * - 这个函数是做什么的：将 PQ 编码值转换为线性光值
 * - 为什么需要这个函数：HDR 工作流程中的标准转换  
 * - 适用于什么场景：BT.2020+PQ 色彩空间处理
 * - 不适用于什么场景：SDR 或非 PQ 编码的内容
 * 
 * @param pq_value PQ 编码输入值 [0,1]
 * @return 线性光输出值 [0,10000] cd/m²
 * 
 * @example
 * // 具体使用示例
 * float linear_light = PQ_EOTF(0.5f);  // 转换中等亮度
 * 
 * @note 确保输入值在 [0,1] 范围内
 * @warning 超出范围的输入会被钳制
 */
```

### 算法注释模板
```cpp
/**
 * PPR (Pivoted Power-Rational) 色调映射算法
 * 
 * 用途：将HDR亮度映射到显示范围，保持视觉自然
 * 不是：通用的颜色校正或艺术滤镜
 * 
 * 适用场景：
 * - 需要数学可证明的单调性
 * - 要求跨平台数值一致性
 * - HDR到SDR的色调映射
 * 
 * 不适用场景：
 * - 艺术风格化效果
 * - 非单调的创意映射
 * 
 * 算法保证：
 * - 单调递增：f(x1) <= f(x2) when x1 <= x2
 * - C¹连续：在拼接点导数连续
 * - 数值稳定：避免NaN/Inf
 */
```

## 审查流程

### 自我审查
1. 读一遍，假装自己是新手
2. 找出可能的误解点
3. 补充澄清说明
4. 添加具体示例

### 同行审查
1. 让其他开发者读一遍
2. 记录他们的困惑点
3. 针对困惑点补充说明
4. 迭代直到没有误解

### 用户测试
1. 找目标用户试用
2. 观察他们的理解偏差
3. 根据反馈调整文档
4. 建立FAQ解答常见问题

## 执行指导

### 对于 Kiro AI
当处理 Cinema Pro HDR 项目时：
1. **自动使用中文**：所有文档创建和修改都使用中文
2. **保持技术准确性**：确保技术术语翻译准确
3. **遵循文档标准**：结合上述结构要求和检查清单
4. **代码注释中文化**：新增或修改的代码注释使用中文

### 文档更新流程
1. 检查现有文档语言
2. 如果是英文，提供中文翻译
3. 新文档直接使用中文创建
4. 保持代码示例和技术规范的准确性

### 🚫 避免的情况
- 不要混用中英文（除了技术术语对照）
- 不要使用机器翻译的生硬表达
- 不要忽略技术术语的准确性

## 持续改进

### 收集反馈机制
- 在文档中添加反馈链接
- 定期收集用户困惑点
- 建立误解数据库
- 持续优化文档

### 版本控制
- 每次重大更新记录改进点
- 跟踪哪些误解被解决了
- 监控新出现的困惑模式
- 建立文档质量指标

### 质量检查清单
- [ ] 文档标题和章节标题使用中文
- [ ] 技术概念有清晰的中文解释
- [ ] 代码注释使用中文
- [ ] 保持技术术语的准确性
- [ ] 遵循中文表达习惯，避免直译