<svg xmlns="http://www.w3.org/2000/svg" width="900" height="520" viewBox="0 0 900 520">
    <defs>
        <style>
            .box {
                fill: #f7f7f7;
                stroke: #333;
                stroke-width: 1.5;
            }

            .diamond {
                fill: #fff9e6;
                stroke: #c99200;
                stroke-width: 1.5;
            }

            .term {
                fill: #eef7ff;
                stroke: #6aa0ff;
                stroke-width: 1.5;
            }

            .end {
                fill: #ffecec;
                stroke: #d33;
                stroke-width: 1.5;
            }

            .ok {
                fill: #e9ffef;
                stroke: #2ca02c;
                stroke-width: 1.5;
            }

            .title {
                font: 600 14px sans-serif;
            }

            .label {
                font: 12px sans-serif;
            }
        </style>
        <marker id="arrow" markerWidth="10" markerHeight="8" refX="9" refY="4" orient="auto" markerUnits="strokeWidth">
            <path d="M0,0 L10,4 L0,8 z" fill="#333" />
        </marker>
    </defs>

    <!-- Start -->
    <rect x="70" y="40" width="160" height="50" class="term" rx="8" />
    <text x="150" y="70" text-anchor="middle" class="title">开始 / 加载媒体</text>

    <!-- Detections -->
    <rect x="50" y="120" width="200" height="60" class="box" rx="6" />
    <text x="150" y="148" text-anchor="middle" class="label">读取侧车/信令，采集设备能力</text>

    <polygon points="380,120 480,150 380,180 280,150" class="diamond" />
    <text x="380" y="150" text-anchor="middle" class="label">检测 DV/HDR10+/Vivid 是否已激活？</text>

    <rect x="560" y="120" width="240" height="60" class="end" rx="8" />
    <text x="680" y="150" text-anchor="middle" class="title">禁用 CPH 执行</text>
    <text x="680" y="168" text-anchor="middle" class="label">避免二次色调映射</text>

    <!-- Next decision -->
    <polygon points="150,220 250,250 150,280 50,250" class="diamond" />
    <text x="150" y="250" text-anchor="middle" class="label">CPH扩展是否可读？schema/版本合法？</text>

    <rect x="300" y="220" width="220" height="60" class="box" rx="8" />
    <text x="410" y="250" text-anchor="middle" class="title">基于采样验证</text>
    <text x="410" y="270" text-anchor="middle" class="label">单调/C¹、闪烁、性能、DCI合规</text>

    <polygon points="680,220 780,250 680,280 580,250" class="diamond" />
    <text x="680" y="250" text-anchor="middle" class="label">是否全部通过门限？</text>

    <rect x="560" y="320" width="240" height="60" class="ok" rx="8" />
    <text x="680" y="350" text-anchor="middle" class="title">启用 CPH 执行</text>
    <text x="680" y="368" text-anchor="middle" class="label">含 LED 参数化适配</text>

    <rect x="300" y="320" width="220" height="60" class="end" rx="8" />
    <text x="410" y="350" text-anchor="middle" class="title">回退到 2094-10 / y=x</text>

    <!-- Arrows -->
    <line x1="150" y1="90" x2="150" y2="120" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
    <line x1="250" y1="150" x2="280" y2="150" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
    <line x1="480" y1="150" x2="560" y2="150" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
    <line x1="380" y1="180" x2="380" y2="220" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
    <line x1="150" y1="180" x2="150" y2="220" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
    <line x1="250" y1="250" x2="300" y2="250" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
    <line x1="520" y1="250" x2="580" y2="250" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
    <line x1="680" y1="280" x2="680" y2="320" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />
    <line x1="680" y1="250" x2="520" y2="350" stroke="#333" stroke-width="2" marker-end="url(#arrow)" />

    <!-- Side notes -->
    <text x="560" y="118" class="label">是</text>
    <text x="380" y="118" class="label">否</text>
    <text x="150" y="218" class="label">否</text>
    <text x="260" y="248" class="label">是</text>
    <text x="580" y="248" class="label">是</text>
    <text x="690" y="318" class="label">通过</text>
    <text x="500" y="338" class="label">不通过/降级</text>
</svg>